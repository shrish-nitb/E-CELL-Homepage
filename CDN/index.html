<html>
  <head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.7.1/firebase-app.min.js" integrity="sha512-3cFSiwWFgtq3x14VumGROzcebUW6mmZNGW9UkYg0DV5SZ/SgxL8EMj8+4qUUI5dF6Wtim53OZGfCRlCv8UFBxQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

 let config = {
    apiKey: "AIzaSyDsxXUlVdImrkzZgN1hA9fwD-GWGHrk0Mw",
    authDomain: "ecell-f69fd.firebaseapp.com",
    databaseURL: "https://ecell-f69fd-default-rtdb.firebaseio.com",
    projectId: "ecell-f69fd",
    storageBucket: "ecell-f69fd.appspot.com",
    messagingSenderId: "742246625764",
    appId: "1:742246625764:web:9d029cdf99989fb3f9d7f1",
    measurementId: "G-ER9DWJR9SF"
};
firebase.initializeApp(config);

let datamsg = firebase.database().ref('guestdata');
const search = new URLSearchParams(window.location.search);
const paramarr = Array.from(search.entries());

if (paramarr.length > 0 && paramarr[0][1] === 'hackathon') {
    const date = new Date();
    const time = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    const time3 = date.toLocaleDateString();
    const data = {
        name: paramarr[0][0],
        time: time,
        date: time3
    };

    sendMessage(data);
}

async function sendMessage(data) {
    let guestdata = datamsg.push();
    try {
        await guestdata.set(data);
        console.log("done");
    } catch (err) {
        console.log(err);
    } finally {
        window.location.assign("https://drive.google.com/file/d/1_l0qqEN5f6-9D3o5hfPXtc3149PH0yMY/view?usp=sharing");
    }
}

</script>
  </head>
</html>
